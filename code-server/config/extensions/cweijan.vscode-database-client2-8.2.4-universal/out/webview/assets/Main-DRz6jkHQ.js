import{a as L,A,r as _,e as B,N as E,bq as J,s as d,f as b,af as P,k as c,ak as R,j as n,h as a,F as U,B as $,J as u,$ as m,L as w,n as h,g as j,K,t as M,av as O,I as k,aj as Q,br as q,w as F,o as l,C as z}from"./app-CrvaeZra.js";import{_ as H}from"./vscode-MMfGApC2.js";import{u as G}from"./resultUIStore-CpB1td2C.js";import"./constants-DgoLmzql.js";import{b as g,D as p}from"./DatabaseType-25kBBVgA.js";import"./wrapper-D1_8DVyj.js";import"./viewUtil-DCbZMcCo.js";import"./arrayUtil-CzswX_vs.js";import"./objectUtil-Z6JRxuBJ.js";const W={id:"tableTab",class:"tab"},X=["onClick"],Y=L({__name:"Main",setup(Z){const y=J(),C=G(),T=A(),o=_(null),v=_(!1),r=_("result"),D=B(()=>[{id:"design",i18n:"table.design",icon:"codicon-edit",disabled:()=>!v.value},{id:"result",i18n:"table.data",icon:"codicon-database blue"},{id:"log",i18n:"common.log",icon:"codicon-file",hidden:()=>o.value==p.ES},{id:"erDiagram",i18n:"table.erDiagram",icon:"codicon-symbol-class yellow",hidden:()=>g(o.value),disabled:()=>!v.value||g(o.value)},{id:"status",i18n:"table.monitor",icon:"codicon-graph-line",disabled:()=>[p.SQLITE,p.DUCK_DB].includes(o.value),hidden:()=>g(o.value)},{id:"es-status",i18n:"table.monitor",icon:"codicon-graph-line",hidden:()=>o.value!=p.ES}].filter(t=>{var e;return!((e=t.hidden)!=null&&e.call(t))})),f=t=>{typeof t=="string"&&(t={id:t});const{id:e,disabled:s}=t;s!=null&&s()||r.value!==e&&(r.value=e,y.push(e),e=="log"&&d.emit("initTerminal"))};E(()=>{r.value=y.currentRoute.value.name,window.addEventListener("message",({data:t})=>{["RUN","DATA"].includes(t.type)&&(o.value=t.content.dbType,["design","result","erDiagram"].includes(r.value)||f("result"))}),d.on("table_info",({singleTable:t,dbType:e})=>{o.value=e,v.value=t,v.value||f("result")})});const N=()=>{d.emit("editInVSCode",C.toolbar.sql)},x=()=>{if(!T.isPay)return F(m("plan.premiumNotice"));d.emit("viewJSON")};return(t,e)=>{const s=w("vsc-tooltip"),I=w("router-view");return l(),b("div",null,[P(a("ul",W,[(l(!0),b(U,null,$(D.value,(i,V)=>{var S;return l(),b("li",{key:V,class:h(["tab__item",{"tab__item--active":r.value==i.id,disabled:(S=i.disabled)==null?void 0:S.call(i)}]),onClick:ee=>f(i)},[i.icon?(l(),b("i",{key:0,type:"icon",class:h(i.icon),style:{position:"relative",top:"3px"}},null,2)):j("",!0),K(" "+M(n(m)(i.i18n)),1)],10,X)}),128)),c(s,{title:n(m)("table.editInVSCode")},{default:u(()=>[a("div",{class:"panel-icon !pl-2",style:{"border-left":"1px solid var(--border-color)"},onClick:N},e[1]||(e[1]=[a("img",{src:H,alt:"VSCode Logo"},null,-1)]))]),_:1},8,["title"]),c(s,{title:n(m)("table.viewAsJSON")},{default:u(()=>[a("div",{class:"panel-icon",onClick:x},e[2]||(e[2]=[a("i",{class:"codicon-json text-yellow"},null,-1)]))]),_:1},8,["title"]),c(s,{title:n(m)("table.history")},{default:u(()=>[a("div",{class:"panel-icon",onClick:e[0]||(e[0]=i=>n(d).emit("viewHistory"))},e[3]||(e[3]=[a("i",{class:"codicon-history"},null,-1)]))]),_:1},8,["title"])],512),[[R,n(C).showSQLPanel]]),c(I,null,{default:u(({Component:i})=>[c(O,null,{default:u(()=>[(l(),k(q,null,[(l(),k(Q(i)))],1024))]),_:2},1024)]),_:1})])}}}),ce=z(Y,[["__scopeId","data-v-c59a5e51"]]);export{ce as default};
